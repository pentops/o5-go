// Code generated by Bprotoc-gen-go-o5-messaging . DO NOT EDIT.
// versions:
// - protoc-gen-go-o5-messaging 0.0.0
// source: o5/deployer/v1/topic/deployer.proto

package deployer_tpb

import (
	context "context"
	messaging_pb "github.com/pentops/o5-go/messaging/v1/messaging_pb"
	o5msg "github.com/pentops/o5-messaging.go/o5msg"
)

// Service: DeploymentRequestTopic
type DeploymentRequestTopicTxSender[C any] struct {
	sender o5msg.TxSender[C]
}

func NewDeploymentRequestTopicTxSender[C any](sender o5msg.TxSender[C]) *DeploymentRequestTopicTxSender[C] {
	sender.Register(o5msg.TopicDescriptor{
		Service: "o5.deployer.v1.topic.DeploymentRequestTopic",
		Methods: []o5msg.MethodDescriptor{
			{
				Name:    "RequestDeployment",
				Message: (*RequestDeploymentMessage).ProtoReflect(nil).Descriptor(),
			},
		},
	})
	return &DeploymentRequestTopicTxSender[C]{sender: sender}
}

type DeploymentRequestTopicCollector[C any] struct {
	collector o5msg.Collector[C]
}

func NewDeploymentRequestTopicCollector[C any](collector o5msg.Collector[C]) *DeploymentRequestTopicCollector[C] {
	collector.Register(o5msg.TopicDescriptor{
		Service: "o5.deployer.v1.topic.DeploymentRequestTopic",
		Methods: []o5msg.MethodDescriptor{
			{
				Name:    "RequestDeployment",
				Message: (*RequestDeploymentMessage).ProtoReflect(nil).Descriptor(),
			},
		},
	})
	return &DeploymentRequestTopicCollector[C]{collector: collector}
}

type DeploymentRequestTopicPublisher struct {
	publisher o5msg.Publisher
}

func NewDeploymentRequestTopicPublisher(publisher o5msg.Publisher) *DeploymentRequestTopicPublisher {
	publisher.Register(o5msg.TopicDescriptor{
		Service: "o5.deployer.v1.topic.DeploymentRequestTopic",
		Methods: []o5msg.MethodDescriptor{
			{
				Name:    "RequestDeployment",
				Message: (*RequestDeploymentMessage).ProtoReflect(nil).Descriptor(),
			},
		},
	})
	return &DeploymentRequestTopicPublisher{publisher: publisher}
}

// Method: RequestDeployment

func (msg *RequestDeploymentMessage) O5MessageHeader() o5msg.Header {
	header := o5msg.Header{
		GrpcService:      "o5.deployer.v1.topic.DeploymentRequestTopic",
		GrpcMethod:       "RequestDeployment",
		Headers:          map[string]string{},
		DestinationTopic: "o5-deployer-input_request",
	}
	return header
}

func (send DeploymentRequestTopicTxSender[C]) RequestDeployment(ctx context.Context, sendContext C, msg *RequestDeploymentMessage) error {
	return send.sender.Send(ctx, sendContext, msg)
}

func (collect DeploymentRequestTopicCollector[C]) RequestDeployment(sendContext C, msg *RequestDeploymentMessage) {
	collect.collector.Collect(sendContext, msg)
}

func (publish DeploymentRequestTopicPublisher) RequestDeployment(ctx context.Context, msg *RequestDeploymentMessage) {
	publish.publisher.Publish(ctx, msg)
}

// Service: DeploymentReplyTopic
type DeploymentReplyTopicTxSender[C any] struct {
	sender o5msg.TxSender[C]
}

func NewDeploymentReplyTopicTxSender[C any](sender o5msg.TxSender[C]) *DeploymentReplyTopicTxSender[C] {
	sender.Register(o5msg.TopicDescriptor{
		Service: "o5.deployer.v1.topic.DeploymentReplyTopic",
		Methods: []o5msg.MethodDescriptor{
			{
				Name:    "DeploymentStatus",
				Message: (*DeploymentStatusMessage).ProtoReflect(nil).Descriptor(),
			},
		},
	})
	return &DeploymentReplyTopicTxSender[C]{sender: sender}
}

type DeploymentReplyTopicCollector[C any] struct {
	collector o5msg.Collector[C]
}

func NewDeploymentReplyTopicCollector[C any](collector o5msg.Collector[C]) *DeploymentReplyTopicCollector[C] {
	collector.Register(o5msg.TopicDescriptor{
		Service: "o5.deployer.v1.topic.DeploymentReplyTopic",
		Methods: []o5msg.MethodDescriptor{
			{
				Name:    "DeploymentStatus",
				Message: (*DeploymentStatusMessage).ProtoReflect(nil).Descriptor(),
			},
		},
	})
	return &DeploymentReplyTopicCollector[C]{collector: collector}
}

type DeploymentReplyTopicPublisher struct {
	publisher o5msg.Publisher
}

func NewDeploymentReplyTopicPublisher(publisher o5msg.Publisher) *DeploymentReplyTopicPublisher {
	publisher.Register(o5msg.TopicDescriptor{
		Service: "o5.deployer.v1.topic.DeploymentReplyTopic",
		Methods: []o5msg.MethodDescriptor{
			{
				Name:    "DeploymentStatus",
				Message: (*DeploymentStatusMessage).ProtoReflect(nil).Descriptor(),
			},
		},
	})
	return &DeploymentReplyTopicPublisher{publisher: publisher}
}

// Method: DeploymentStatus

func (msg *DeploymentStatusMessage) O5MessageHeader() o5msg.Header {
	header := o5msg.Header{
		GrpcService:      "o5.deployer.v1.topic.DeploymentReplyTopic",
		GrpcMethod:       "DeploymentStatus",
		Headers:          map[string]string{},
		DestinationTopic: "o5-deployer-output_reply",
	}
	if msg.Request != nil {
		header.Extension = &messaging_pb.Message_Reply_{
			Reply: &messaging_pb.Message_Reply{
				ReplyTo: msg.Request.ReplyTo,
			},
		}
	}
	return header
}

func (send DeploymentReplyTopicTxSender[C]) DeploymentStatus(ctx context.Context, sendContext C, msg *DeploymentStatusMessage) error {
	return send.sender.Send(ctx, sendContext, msg)
}

func (collect DeploymentReplyTopicCollector[C]) DeploymentStatus(sendContext C, msg *DeploymentStatusMessage) {
	collect.collector.Collect(sendContext, msg)
}

func (publish DeploymentReplyTopicPublisher) DeploymentStatus(ctx context.Context, msg *DeploymentStatusMessage) {
	publish.publisher.Publish(ctx, msg)
}
